\begin{tikzpicture}[thick]

\coordinate (p) at (0,0);
\foreach \num in {1,...,5}{
    \node[draw, minimum size=1cm] at (p) (p\num) {Publisher \num}; % Fill the box
    \coordinate (p) at ($(p) - (0,2)$);
}

\coordinate (q) at (6,-2.5);
\foreach \num in {1,...,4}{
    \node[draw, minimum size=1cm, minimum width=2cm] at (q) (q\num) {Queue \num}; % Fill the box
    \coordinate (q) at ($(q) - (0,1)$);
}

\coordinate (s) at (12,-2);
\foreach \num in {1,...,3}{
    \node[draw, minimum size=1cm] at (s) (s\num) {Subscriber \num}; % Fill the box
    \coordinate (s) at ($(s) - (0,2)$);
}

\coordinate (z) at (6,-4);
\node[draw, minimum width=3cm, minimum height=6cm, gray, dashed] at (z) (broker) {}; % Fill the box
\node[below=0.25 cm of broker] (brokerLabel) {Message Broker};

% Arrows
\draw[->](p1) edge (q1);
\draw[->](p2) edge (q1);
\draw[->](p2) edge (q2);
\draw[->](p3) edge (q3);
\draw[->](p4) edge (q3);
\draw[->](p4) edge (q4);
\draw[->](p5) edge (q4);

\draw[->](q1) edge (s1);
\draw[->](q2) edge (s2);
\draw[->](q3) edge (s3);
\draw[->](q4) edge (s3);

\end{tikzpicture}
